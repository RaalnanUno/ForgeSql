{"version":3,"sources":["../../main/index.ts","../../main/db/sqlserver.ts","../../main/db/queries.ts"],"sourcesContent":["import util from \"util\";\r\n\r\nimport { app, BrowserWindow, ipcMain } from \"electron\";\r\nimport path from \"path\";\r\nimport {\r\n  DbListDatabasesResponse,\r\n  DbListTablesResponse,\r\n  DbListViewsResponse,\r\n  DbOpenResponse,\r\n  DbQueryResponse,\r\n  SqlServerConnectionProfile,\r\n} from \"../shared/types\";\r\n\r\nimport { openDb, closeDb, queryText, buildOdbcConnectionString } from \"./db/sqlserver\";\r\n\r\nimport { listDatabasesSql, listTablesSql, listViewsSql } from \"./db/queries\";\r\n\r\nlet win: BrowserWindow | null = null;\r\n\r\nfunction formatError(e: any): string {\r\n  if (!e) return \"Unknown error (empty).\";\r\n  if (typeof e === \"string\") return e;\r\n\r\n  const msg = e?.message ? String(e.message) : \"\";\r\n  if (msg && msg !== \"[object Object]\") return msg;\r\n\r\n  // common nested shapes\r\n  const nestedMsg =\r\n    e?.originalError?.message ??\r\n    e?.cause?.message ??\r\n    e?.innerError?.message ??\r\n    e?.error?.message;\r\n\r\n  if (nestedMsg) return String(nestedMsg);\r\n\r\n  // mssql/msnodesqlv8 sometimes stores details on these fields\r\n  const bits = [\r\n    e.code ? `code=${e.code}` : null,\r\n    e.number ? `number=${e.number}` : null,\r\n    e.state ? `state=${e.state}` : null,\r\n    e.class ? `class=${e.class}` : null,\r\n    e.serverName ? `server=${e.serverName}` : null,\r\n    e.sqlstate ? `sqlstate=${e.sqlstate}` : null,\r\n  ].filter(Boolean);\r\n\r\n  // last resort: dump everything we can\r\n  try {\r\n    const dump = JSON.stringify(e, Object.getOwnPropertyNames(e), 2);\r\n    return bits.length ? `${bits.join(\", \")}\\n${dump}` : dump;\r\n  } catch {\r\n    return bits.length ? bits.join(\", \") : String(e);\r\n  }\r\n}\r\n\r\n\r\nasync function createWindow() {\r\n  win = new BrowserWindow({\r\n    width: 1200,\r\n    height: 800,\r\n    webPreferences: {\r\n      preload: path.join(__dirname, \"../preload/index.js\"),\r\n      contextIsolation: true,\r\n      nodeIntegration: false,\r\n    },\r\n  });\r\n\r\n  // Vite dev server or built file:\r\n  const devUrl = process.env.VITE_DEV_SERVER_URL;\r\n  if (devUrl) await win.loadURL(devUrl);\r\n  else\r\n    await win.loadFile(\r\n      path.join(__dirname, \"../../../reactui/dist/index.html\"),\r\n    );\r\n}\r\n\r\napp.whenReady().then(createWindow);\r\n\r\napp.on(\"window-all-closed\", async () => {\r\n  await closeDb();\r\n  if (process.platform !== \"darwin\") app.quit();\r\n});\r\n\r\nipcMain.handle(\r\n  \"db:open\",\r\n  async (\r\n    _evt,\r\n    args: { profile: SqlServerConnectionProfile },\r\n  ): Promise<DbOpenResponse> => {\r\n    try {\r\nawait openDb(args.profile);\r\n\r\n// return the exact connection string used\r\nconst used =\r\n  (args.profile.connectionString ?? \"\").trim() ||\r\n  buildOdbcConnectionString(args.profile).connectionString;\r\n\r\nreturn { ok: true, connectionString: used };\r\n\r\n} catch (e: any) {\r\n  console.error(\"db:open failed raw:\", e);\r\n  console.error(\"db:open failed inspect:\", util.inspect(e, { depth: 10, colors: false, showHidden: true }));\r\n\r\n  // also inspect nested fields commonly used by mssql/msnodesqlv8\r\n  if (e?.originalError) {\r\n    console.error(\"db:open originalError inspect:\", util.inspect(e.originalError, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n  if (e?.cause) {\r\n    console.error(\"db:open cause inspect:\", util.inspect(e.cause, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n\r\n  return { ok: false, error: formatError(e) };\r\n}\r\n\r\n  },\r\n);\r\n\r\nipcMain.handle(\"db:close\", async (): Promise<DbOpenResponse> => {\r\n  try {\r\n    await closeDb();\r\n    return { ok: true };\r\n} catch (e: any) {\r\n  console.error(\"db:open failed raw:\", e);\r\n  console.error(\"db:open failed inspect:\", util.inspect(e, { depth: 10, colors: false, showHidden: true }));\r\n\r\n  // also inspect nested fields commonly used by mssql/msnodesqlv8\r\n  if (e?.originalError) {\r\n    console.error(\"db:open originalError inspect:\", util.inspect(e.originalError, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n  if (e?.cause) {\r\n    console.error(\"db:open cause inspect:\", util.inspect(e.cause, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n\r\n  return { ok: false, error: formatError(e) };\r\n}\r\n\r\n});\r\n\r\nipcMain.handle(\r\n  \"db:listDatabases\",\r\n  async (): Promise<DbListDatabasesResponse> => {\r\n    try {\r\n      const r = await queryText(listDatabasesSql);\r\n      const databases = r.rows.map((x) => String(x[0]));\r\n      return { ok: true, databases };\r\n} catch (e: any) {\r\n  console.error(\"db:open failed raw:\", e);\r\n  console.error(\"db:open failed inspect:\", util.inspect(e, { depth: 10, colors: false, showHidden: true }));\r\n\r\n  // also inspect nested fields commonly used by mssql/msnodesqlv8\r\n  if (e?.originalError) {\r\n    console.error(\"db:open originalError inspect:\", util.inspect(e.originalError, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n  if (e?.cause) {\r\n    console.error(\"db:open cause inspect:\", util.inspect(e.cause, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n\r\n  return { ok: false, error: formatError(e) };\r\n}\r\n\r\n  },\r\n);\r\n\r\nipcMain.handle(\"db:listTables\", async (): Promise<DbListTablesResponse> => {\r\n  try {\r\n    const r = await queryText(listTablesSql);\r\n    const tables = r.rows.map((x) => String(x[0]));\r\n    return { ok: true, tables };\r\n} catch (e: any) {\r\n  console.error(\"db:open failed raw:\", e);\r\n  console.error(\"db:open failed inspect:\", util.inspect(e, { depth: 10, colors: false, showHidden: true }));\r\n\r\n  // also inspect nested fields commonly used by mssql/msnodesqlv8\r\n  if (e?.originalError) {\r\n    console.error(\"db:open originalError inspect:\", util.inspect(e.originalError, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n  if (e?.cause) {\r\n    console.error(\"db:open cause inspect:\", util.inspect(e.cause, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n\r\n  return { ok: false, error: formatError(e) };\r\n}\r\n\r\n});\r\n\r\nipcMain.handle(\"db:listViews\", async (): Promise<DbListViewsResponse> => {\r\n  try {\r\n    const r = await queryText(listViewsSql);\r\n    const views = r.rows.map((x) => String(x[0]));\r\n    return { ok: true, views };\r\n} catch (e: any) {\r\n  console.error(\"db:open failed raw:\", e);\r\n  console.error(\"db:open failed inspect:\", util.inspect(e, { depth: 10, colors: false, showHidden: true }));\r\n\r\n  // also inspect nested fields commonly used by mssql/msnodesqlv8\r\n  if (e?.originalError) {\r\n    console.error(\"db:open originalError inspect:\", util.inspect(e.originalError, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n  if (e?.cause) {\r\n    console.error(\"db:open cause inspect:\", util.inspect(e.cause, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n\r\n  return { ok: false, error: formatError(e) };\r\n}\r\n\r\n});\r\n\r\nipcMain.handle(\r\n  \"db:query\",\r\n  async (_evt, args: { sql: string }): Promise<DbQueryResponse> => {\r\n    try {\r\n      const r = await queryText(args.sql);\r\n      return {\r\n        ok: true,\r\n        result: { columns: r.columns, rows: r.rows },\r\n        rowCount: r.rowCount,\r\n      };\r\n} catch (e: any) {\r\n  console.error(\"db:open failed raw:\", e);\r\n  console.error(\"db:open failed inspect:\", util.inspect(e, { depth: 10, colors: false, showHidden: true }));\r\n\r\n  // also inspect nested fields commonly used by mssql/msnodesqlv8\r\n  if (e?.originalError) {\r\n    console.error(\"db:open originalError inspect:\", util.inspect(e.originalError, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n  if (e?.cause) {\r\n    console.error(\"db:open cause inspect:\", util.inspect(e.cause, { depth: 10, colors: false, showHidden: true }));\r\n  }\r\n\r\n  return { ok: false, error: formatError(e) };\r\n}\r\n\r\n  },\r\n);\r\n","// File: electron/main/db/sqlserver.ts\r\nimport sql from \"mssql/msnodesqlv8\";\r\nimport { SqlServerConnectionProfile } from \"../../shared/types\";\r\n\r\nlet pool: sql.ConnectionPool | null = null;\r\n\r\nfunction normalizeServer(raw: string): string {\r\n  const s = (raw ?? \"\").trim();\r\n  if (!s) return \".\";\r\n\r\n  const lower = s.toLowerCase();\r\n  if (s === \".\" || lower === \"localhost\" || lower === \"(local)\") return \".\";\r\n\r\n  return s;\r\n}\r\n\r\nexport function buildOdbcConnectionString(profile: SqlServerConnectionProfile): {\r\n  driver: string;\r\n  connectionString: string;\r\n} {\r\n  const rawServer = (profile.server ?? \".\").trim();\r\n  const server = normalizeServer(rawServer);\r\n  const database = profile.database ?? \"master\";\r\n\r\n  // IMPORTANT: use an explicit ODBC driver (match what sqlcmd is using)\r\n  const driver = \"ODBC Driver 17 for SQL Server\";\r\n\r\n  const encrypt = profile.encrypt ?? false;\r\n  const trustServerCertificate = profile.trustServerCertificate ?? true;\r\n\r\n  const parts: string[] = [];\r\n  parts.push(`Driver={${driver}}`);\r\n  parts.push(`Server=${server}`);\r\n  parts.push(`Database=${database}`);\r\n\r\n  if (profile.auth.kind === \"windows\") {\r\n    parts.push(\"Trusted_Connection=Yes\");\r\n  } else {\r\n    parts.push(`Uid=${profile.auth.user}`);\r\n    parts.push(`Pwd=${profile.auth.password}`);\r\n  }\r\n\r\n  parts.push(`Encrypt=${encrypt ? \"Yes\" : \"No\"}`);\r\n  parts.push(`TrustServerCertificate=${trustServerCertificate ? \"Yes\" : \"No\"}`);\r\n\r\n  return { driver, connectionString: parts.join(\";\") + \";\" };\r\n}\r\n\r\nfunction buildConfig(profile: SqlServerConnectionProfile): sql.config {\r\n  // If user provided a raw connection string, use it exactly.\r\n  const raw = (profile.connectionString ?? \"\").trim();\r\n  if (raw) {\r\n    // Keep driver consistent with how msnodesqlv8 likes it.\r\n    // If their raw string already includes Driver=... itâ€™s fine.\r\n    return {\r\n      driver: \"ODBC Driver 17 for SQL Server\",\r\n      connectionString: raw.endsWith(\";\") ? raw : raw + \";\",\r\n      options: {\r\n        trustedConnection: profile.auth.kind === \"windows\",\r\n      },\r\n    } as any;\r\n  }\r\n\r\n  // Otherwise generate.\r\n  const built = buildOdbcConnectionString(profile);\r\n  return {\r\n    driver: built.driver,\r\n    connectionString: built.connectionString,\r\n    options: {\r\n      trustedConnection: profile.auth.kind === \"windows\",\r\n    },\r\n  } as any;\r\n}\r\n\r\nexport async function openDb(profile: SqlServerConnectionProfile) {\r\n  await closeDb();\r\n  const cfg = buildConfig(profile);\r\n\r\n  console.log(\"[db] connecting with cfg:\", {\r\n    driver: (cfg as any).driver,\r\n    connectionString: (cfg as any).connectionString ? \"<present>\" : \"<missing>\",\r\n  });\r\n\r\n  pool = await new sql.ConnectionPool(cfg).connect();\r\n}\r\n\r\nexport async function closeDb() {\r\n  if (!pool) return;\r\n  try {\r\n    await pool.close();\r\n  } finally {\r\n    pool = null;\r\n  }\r\n}\r\n\r\nexport async function queryText(sqlText: string) {\r\n  if (!pool) throw new Error(\"No open connection.\");\r\n  const resp = await pool.request().query(sqlText);\r\n\r\n  const recordset = resp.recordset ?? [];\r\n  const columns = recordset.length ? Object.keys(recordset[0]) : [];\r\n  const rows = recordset.map((r: any) => columns.map((c) => r[c]));\r\n\r\n  return { columns, rows, rowCount: resp.rowsAffected?.[0] ?? 0 };\r\n}\r\n","export const listDatabasesSql = `\r\nSELECT name\r\nFROM sys.databases\r\nWHERE database_id > 4\r\nORDER BY name;\r\n`;\r\n\r\nexport const listTablesSql = `\r\nSELECT s.name + '.' + t.name AS [name]\r\nFROM sys.tables t\r\nJOIN sys.schemas s ON t.schema_id = s.schema_id\r\nORDER BY s.name, t.name;\r\n`;\r\n\r\nexport const listViewsSql = `\r\nSELECT s.name + '.' + v.name AS [name]\r\nFROM sys.views v\r\nJOIN sys.schemas s ON v.schema_id = s.schema_id\r\nORDER BY s.name, v.name;\r\n`;\r\n\r\nexport function selectTopSql(fullName: string, top = 100) {\r\n  return `SELECT TOP (${top}) * FROM ${fullName};`;\r\n}"],"mappings":"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","names":["sql","path","util"]}